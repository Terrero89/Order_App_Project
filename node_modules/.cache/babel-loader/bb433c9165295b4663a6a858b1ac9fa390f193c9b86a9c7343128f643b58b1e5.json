{"ast":null,"code":"import _regeneratorRuntime from\"/home/terrero/Documents/Web Development/Frontend/React_Projects/food_order_app/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/terrero/Documents/Web Development/Frontend/React_Projects/food_order_app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/home/terrero/Documents/Web Development/Frontend/React_Projects/food_order_app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useEffect,useState}from\"react\";import Card from'../UI/Card';import MealItem from'./MealItem';import classes from'./AvailableMeals.module.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var AvailableMeals=function AvailableMeals(props){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),meals=_useState2[0],setMeals=_useState2[1];//state that will be used to change the state of loaded info\nvar _useState3=useState(true),_useState4=_slicedToArray(_useState3,2),isLoading=_useState4[0],setIsloading=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),httpError=_useState6[0],setHttpError=_useState6[1];//display http error message if not true\nuseEffect(function(){var fetchMeals=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response,responseData,loadedMeals,key;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return fetch('https://react-http-test-713d8-default-rtdb.firebaseio.com/meals.json');case 2:response=_context.sent;if(response.ok){_context.next=5;break;}throw new Error(\"Something went wrong\");case 5:_context.next=7;return response.json();case 7:responseData=_context.sent;loadedMeals=[];for(key in responseData){loadedMeals.push({id:key,name:responseData[key].name,description:responseData[key].description,price:responseData[key].price});}setMeals(loadedMeals);setIsloading(false);case 12:case\"end\":return _context.stop();}},_callee);}));return function fetchMeals(){return _ref.apply(this,arguments);};}();//try to be able to await for the error to be displayed in the browser\nfetchMeals().catch(function(error){setIsloading(false);setHttpError(error.message);});},[]);if(isLoading){return/*#__PURE__*/_jsx(\"section\",{className:classes.mealsLoading,children:/*#__PURE__*/_jsx(\"p\",{children:\"Loading...\"})});}if(httpError){return/*#__PURE__*/_jsx(\"section\",{className:classes.mealsError,children:/*#__PURE__*/_jsx(\"p\",{children:httpError})});}//helper variable\nvar mealsList=meals.map(function(meal){return/*#__PURE__*/_jsx(MealItem,{id:meal.id,name:meal.name,description:meal.description,price:meal.price},meal.id);});return/*#__PURE__*/_jsx(\"section\",{className:classes.meals,children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsxs(\"ul\",{children:[\" \",mealsList]})})});};export default AvailableMeals;","map":{"version":3,"names":["useEffect","useState","Card","MealItem","classes","jsx","_jsx","jsxs","_jsxs","AvailableMeals","props","_useState","_useState2","_slicedToArray","meals","setMeals","_useState3","_useState4","isLoading","setIsloading","_useState5","_useState6","httpError","setHttpError","fetchMeals","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","response","responseData","loadedMeals","key","wrap","_callee$","_context","prev","next","fetch","sent","ok","Error","json","push","id","name","description","price","stop","apply","arguments","catch","error","message","className","mealsLoading","children","mealsError","mealsList","map","meal"],"sources":["/home/terrero/Documents/Web Development/Frontend/React_Projects/food_order_app/src/components/Meals/AvailableMeals.js"],"sourcesContent":["import {useEffect, useState} from \"react\";\n\nimport Card from '../UI/Card'\nimport MealItem from './MealItem'\nimport classes from './AvailableMeals.module.css'\n\n\nconst AvailableMeals = (props) => {\n\n    const [meals, setMeals] = useState([]); //state that will be used to change the state of loaded info\n    const [isLoading, setIsloading] = useState(true)\n    const [httpError, setHttpError] = useState(false) //display http error message if not true\n    useEffect(() => {\n        const fetchMeals = async () => {\n            const response = await fetch('https://react-http-test-713d8-default-rtdb.firebaseio.com/meals.json');\n\n            if (!response.ok) {\n                throw new Error(\"Something went wrong\")\n            }\n            const responseData = await response.json();\n\n            const loadedMeals = [];\n\n            for (const key in responseData) {\n                loadedMeals.push({\n                    id: key,\n                    name: responseData[key].name,\n                    description: responseData[key].description,\n                    price: responseData[key].price,\n                });\n            }\n\n            setMeals(loadedMeals);\n            setIsloading(false)\n        };\n//try to be able to await for the error to be displayed in the browser\n\n            fetchMeals().catch((error) => {\n                setIsloading(false)\n                setHttpError(error.message)\n            });\n\n\n\n    }, []);\n\n    if (isLoading) {\n        return <section className={classes.mealsLoading}>\n            <p>Loading...</p>\n        </section>\n    }\n\n    if(httpError){\n        return <section className={classes.mealsError}>\n            <p>{httpError}</p>\n        </section>\n    }\n//helper variable\n    const mealsList = meals.map((meal) =>\n        <MealItem\n            key={meal.id}\n            id={meal.id}\n            name={meal.name}\n            description={meal.description}\n            price={meal.price}/>)\n    return <section className={classes.meals}>\n\n        <Card>\n            <ul> {mealsList}</ul>\n\n        </Card>\n\n\n    </section>\n}\n\nexport default AvailableMeals"],"mappings":"4fAAA,OAAQA,SAAS,CAAEC,QAAQ,KAAO,OAAO,CAEzC,MAAO,CAAAC,IAAI,KAAM,YAAY,CAC7B,MAAO,CAAAC,QAAQ,KAAM,YAAY,CACjC,MAAO,CAAAC,OAAO,KAAM,6BAA6B,QAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAGjD,GAAM,CAAAC,cAAc,CAAG,QAAjB,CAAAA,cAAcA,CAAIC,KAAK,CAAK,CAE9B,IAAAC,SAAA,CAA0BV,QAAQ,CAAC,EAAE,CAAC,CAAAW,UAAA,CAAAC,cAAA,CAAAF,SAAA,IAA/BG,KAAK,CAAAF,UAAA,IAAEG,QAAQ,CAAAH,UAAA,IAAkB;AACxC,IAAAI,UAAA,CAAkCf,QAAQ,CAAC,IAAI,CAAC,CAAAgB,UAAA,CAAAJ,cAAA,CAAAG,UAAA,IAAzCE,SAAS,CAAAD,UAAA,IAAEE,YAAY,CAAAF,UAAA,IAC9B,IAAAG,UAAA,CAAkCnB,QAAQ,CAAC,KAAK,CAAC,CAAAoB,UAAA,CAAAR,cAAA,CAAAO,UAAA,IAA1CE,SAAS,CAAAD,UAAA,IAAEE,YAAY,CAAAF,UAAA,IAAoB;AAClDrB,SAAS,CAAC,UAAM,CACZ,GAAM,CAAAwB,UAAU,6BAAAC,IAAA,CAAAC,iBAAA,cAAAC,mBAAA,GAAAC,IAAA,CAAG,SAAAC,QAAA,MAAAC,QAAA,CAAAC,YAAA,CAAAC,WAAA,CAAAC,GAAA,QAAAN,mBAAA,GAAAO,IAAA,UAAAC,SAAAC,QAAA,iBAAAA,QAAA,CAAAC,IAAA,CAAAD,QAAA,CAAAE,IAAA,SAAAF,QAAA,CAAAE,IAAA,SACQ,CAAAC,KAAK,CAAC,sEAAsE,CAAC,QAA9FT,QAAQ,CAAAM,QAAA,CAAAI,IAAA,IAETV,QAAQ,CAACW,EAAE,EAAAL,QAAA,CAAAE,IAAA,eACN,IAAI,CAAAI,KAAK,CAAC,sBAAsB,CAAC,QAAAN,QAAA,CAAAE,IAAA,SAEhB,CAAAR,QAAQ,CAACa,IAAI,EAAE,QAApCZ,YAAY,CAAAK,QAAA,CAAAI,IAAA,CAEZR,WAAW,CAAG,EAAE,CAEtB,IAAWC,GAAG,GAAI,CAAAF,YAAY,CAAE,CAC5BC,WAAW,CAACY,IAAI,CAAC,CACbC,EAAE,CAAEZ,GAAG,CACPa,IAAI,CAAEf,YAAY,CAACE,GAAG,CAAC,CAACa,IAAI,CAC5BC,WAAW,CAAEhB,YAAY,CAACE,GAAG,CAAC,CAACc,WAAW,CAC1CC,KAAK,CAAEjB,YAAY,CAACE,GAAG,CAAC,CAACe,KAC7B,CAAC,CAAC,CACN,CAEAjC,QAAQ,CAACiB,WAAW,CAAC,CACrBb,YAAY,CAAC,KAAK,CAAC,0BAAAiB,QAAA,CAAAa,IAAA,MAAApB,OAAA,GACtB,kBArBK,CAAAL,UAAUA,CAAA,SAAAC,IAAA,CAAAyB,KAAA,MAAAC,SAAA,OAqBf,CACT;AAEY3B,UAAU,EAAE,CAAC4B,KAAK,CAAC,SAACC,KAAK,CAAK,CAC1BlC,YAAY,CAAC,KAAK,CAAC,CACnBI,YAAY,CAAC8B,KAAK,CAACC,OAAO,CAAC,CAC/B,CAAC,CAAC,CAIV,CAAC,CAAE,EAAE,CAAC,CAEN,GAAIpC,SAAS,CAAE,CACX,mBAAOZ,IAAA,YAASiD,SAAS,CAAEnD,OAAO,CAACoD,YAAa,CAAAC,QAAA,cAC5CnD,IAAA,MAAAmD,QAAA,CAAG,YAAU,EAAI,EACX,CACd,CAEA,GAAGnC,SAAS,CAAC,CACT,mBAAOhB,IAAA,YAASiD,SAAS,CAAEnD,OAAO,CAACsD,UAAW,CAAAD,QAAA,cAC1CnD,IAAA,MAAAmD,QAAA,CAAInC,SAAS,EAAK,EACZ,CACd,CACJ;AACI,GAAM,CAAAqC,SAAS,CAAG7C,KAAK,CAAC8C,GAAG,CAAC,SAACC,IAAI,qBAC7BvD,IAAA,CAACH,QAAQ,EAEL0C,EAAE,CAAEgB,IAAI,CAAChB,EAAG,CACZC,IAAI,CAAEe,IAAI,CAACf,IAAK,CAChBC,WAAW,CAAEc,IAAI,CAACd,WAAY,CAC9BC,KAAK,CAAEa,IAAI,CAACb,KAAM,EAJba,IAAI,CAAChB,EAAE,CAIQ,GAAC,CAC7B,mBAAOvC,IAAA,YAASiD,SAAS,CAAEnD,OAAO,CAACU,KAAM,CAAA2C,QAAA,cAErCnD,IAAA,CAACJ,IAAI,EAAAuD,QAAA,cACDjD,KAAA,OAAAiD,QAAA,EAAI,GAAC,CAACE,SAAS,GAAM,EAElB,EAGD,CACd,CAAC,CAED,cAAe,CAAAlD,cAAc"},"metadata":{},"sourceType":"module","externalDependencies":[]}